{% extends "base.html" %}
{% block title %}Leave Detail{% endblock %}
{% block content %}
<h2>Leave Request</h2>
<div class="card mb-3">
  <div class="card-body">
    <p><strong>Employee:</strong> {{ object.employee.username }}</p>
    <p><strong>Reason:</strong><br/>{{ object.reason|linebreaks }}</p>
    <p><strong>Status:</strong> {{ object.get_status_display }}</p>
    <p><small>Submitted: {{ object.created_at|date:"SHORT_DATETIME_FORMAT" }}</small></p>
  </div>
</div>

<div class="mb-3">
  {% if user.is_staff or user.is_superuser %}
    <form method="post" action="{% url 'leave:action' object.pk %}" class="d-inline">
      {% csrf_token %}
      <input type="hidden" name="action" value="approve">
      <button class="btn btn-success" type="submit">Approve</button>
    </form>
    <form method="post" action="{% url 'leave:action' object.pk %}" class="d-inline ms-2">
      {% csrf_token %}
      <input type="hidden" name="action" value="reject">
      <button class="btn btn-warning" type="submit">Reject</button>
    </form>
  {% endif %}

  {% if object.employee == user or user.is_superuser %}
    <a class="btn btn-secondary" href="{% url 'leave:edit' object.pk %}">Edit</a>
    <a class="btn btn-danger" href="{% url 'leave:delete' object.pk %}">Delete</a>
  {% endif %}
  <a class="btn btn-link" href="{% url 'leave:list' %}">Back</a>
</div>
{% endblock %}
